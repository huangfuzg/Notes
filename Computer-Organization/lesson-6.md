### 06 | 指令跳转：原来 if...else 就是 goto

#### CPU 是如何执行指令的？

高级语言编写的代码经过编译和汇编后，生成了很多指令。这些指令就一条一条顺序执行。

在逻辑上，CPU 是由一堆 **寄存器** 组成的。寄存器就是由多个触发器（Flip-Flop）或者锁存器（Latches）组成的简单电路。寄存器和锁存器是两种不同原理的数字电路组成的逻辑门，想深入需要学习数字电路。

N 个触发器或者锁存器，就可以组成一个 N 位（Bit）的寄存器，能够保存 N 位的数据。比方说，我们用的 64 位 Intel 服务器，寄存器就是 64 位的。

##### cpu 里面的寄存器

![CPU 寄存器图](/img/cpu-register.jpg)

##### 三种特殊的寄存器

- PC 寄存器（Program Counter Register）：也叫指令地址寄存器。存放下一条需要执行的计算机指令的内存地址。
- 指令寄存器（Instruction Register）：存放当前正在执行的指令。
- 条件码寄存器（Status Register）：用标记位（Flag），存放 CPU 算术或者逻辑计算的结果。

---

#### 简单过程（if...else 为例子）

详细的过程不写了，目前有些懵圈，细节上有不懂的地方。

PC 寄存器默认是自增【指令地址在内存中是连续的】的方式存放指令的内存地址。CPU 根据 PC 寄存器的指令地址读取指令到指令寄存器中执行。执行后会有结果，把结果存到了条件码寄存器中。同时 PC 寄存器会自增。CPU 开始执行下一条指令【如：jne: jump if not equal】，该指令判断条件码寄存器的零标志位，决定是继续往下执行还是跳转到别的位置执行。这个别的位置是通过判断条件码寄存器的标志位，来改变 PC 寄存器的指令地址。





